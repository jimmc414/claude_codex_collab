# Claude Pipeline Configuration
# Main configuration file for the development pipeline

pipeline:
  name: "Claude Code Development Pipeline"
  version: "1.0.0"
  description: "Systematic development workflow with GitHub Actions integration"

# Pipeline Phases
phases:
  requirements:
    name: "Requirements Gathering"
    prompt_template: "claude_code/pipeline/prompts/requirements_gathering.md"
    output_file: "shared/docs/requirements.md"
    github_action: "claude/requirements-review.yml"
    estimated_time: "1-2 hours"
    dependencies: []

  architecture:
    name: "Architecture Design"
    prompt_template: "claude_code/pipeline/prompts/architecture_prompt.md"
    output_file: "shared/docs/architecture.md"
    github_action: "claude/architecture-review.yml"
    estimated_time: "2-3 hours"
    dependencies: ["requirements"]

  implementation:
    name: "Implementation Planning"
    prompt_template: "claude_code/pipeline/prompts/implementation_prompt.md"
    output_file: "shared/docs/implementation.md"
    github_action: "claude/implementation-review.yml"
    estimated_time: "1-2 hours"
    dependencies: ["architecture"]

  coding:
    name: "Code Implementation"
    prompt_template: "claude_code/pipeline/prompts/implementation_prompt.md"
    output_directory: "shared/src/"
    github_action: "claude/code-review.yml"
    estimated_time: "varies"
    dependencies: ["implementation"]

  review:
    name: "Code Review"
    prompt_template: "claude_code/pipeline/prompts/code_review_prompt.md"
    output_file: "shared/docs/code_review_report.md"
    github_action: "claude/final-review.yml"
    estimated_time: "1 hour"
    dependencies: ["coding"]

# Git Configuration
git:
  branch_naming:
    pattern: "claude/{project-name}"
    auto_create: true
  commit_messages:
    pattern: "{phase}: {description}"
    include_emoji: false
    sign_commits: false
  pull_request:
    auto_create: true
    draft_initially: true
    template: |
      ## Summary
      Implementation of {project-name} following systematic pipeline

      ## Pipeline Status
      - [ ] Requirements gathered and validated
      - [ ] Architecture designed and reviewed
      - [ ] Implementation plan created
      - [ ] Code implemented
      - [ ] Tests passing
      - [ ] Review complete

      ## Generated Documents
      - docs/requirements.md
      - docs/architecture.md
      - docs/implementation.md

      ðŸ¤– Generated with Claude Code Pipeline

# Claude Interaction Settings
claude:
  model: "opus-4.1"
  interaction_style: "conversational"
  confirmation_required:
    - before_commit: true
    - before_push: true
    - before_pr_create: true
  auto_fix:
    linting_issues: true
    formatting_issues: true
    simple_type_errors: true
    failing_tests: false

# Project Templates
templates:
  supported_types:
    - web_app
    - api_service
    - cli_tool
    - library
    - microservice
  default_structure:
    directories:
      - src/
      - tests/
      - docs/
      - config/
      - scripts/
    files:
      - README.md
      - .gitignore
      - .env.example

# Testing Configuration
testing:
  frameworks:
    javascript: ["jest", "mocha", "vitest"]
    python: ["pytest", "unittest"]
    typescript: ["jest", "vitest"]
  coverage:
    target: 80
    fail_under: 60
  run_on:
    - pre_commit: false
    - pre_push: true
    - pr_create: true

# Documentation Settings
documentation:
  auto_generate:
    - api_docs: true
    - readme_update: true
    - changelog: true
  format:
    style: "markdown"
    include_examples: true
    include_diagrams: true

# Monitoring and Metrics
metrics:
  track:
    - requirements_count
    - architecture_components
    - implementation_tasks
    - test_coverage
    - code_quality_score
    - time_per_phase
  report_location: "docs/pipeline_metrics.json"

# Error Handling
error_handling:
  on_validation_failure:
    action: "prompt_user"
    max_retries: 3
  on_test_failure:
    action: "auto_fix_attempt"
    fallback: "prompt_user"
  on_github_action_failure:
    action: "show_logs"
    auto_retry: true

# Advanced Features
advanced:
  parallel_processing:
    enabled: true
    max_workers: 4
  caching:
    enabled: true
    ttl_minutes: 60
  incremental_builds:
    enabled: true
  rollback:
    enabled: true
    keep_checkpoints: 5